# 播客生成器使用說明

## 🎯 三種使用方式

### 1. 快速命令行模式（推薦）
```bash
source venv_312/bin/activate
python quick_podcast.py B2 ./sample_article.txt 2
```

**參數說明：**
- `B2`: 英語等級 (A1, A2, B1, B2, C1, C2)
- `./sample_article.txt`: 文章來源
- `2`: 目標分鐘數

### 2. 配置文件模式
1. 編輯 `podcast_config.yaml`
2. 運行：
```bash
source venv_312/bin/activate
python generate_podcast.py
```

### 3. 程式化調用
```python
from integrated_podcast_generator import IntegratedPodcastGenerator, IntegratedPodcastConfig

config = IntegratedPodcastConfig(
    input_source="./your_article.txt",
    english_level="A2",
    target_minutes=3
)

generator = IntegratedPodcastGenerator()
result = generator.generate(config)
```

## 📊 支援的輸入格式

| 格式 | 範例 | 說明 |
|------|------|------|
| 文本檔案 | `./article.txt` | 本地文本檔案 |
| PDF 文檔 | `./document.pdf` | PDF 文檔 |
| 網頁文章 | `https://example.com/article` | 網頁連結 |
| YouTube | `https://youtube.com/watch?v=...` | YouTube 影片 |

## 🎯 英語等級 (CEFR)

| 等級 | 名稱 | 說明 |
|------|------|------|
| A1 | 初學者 | 基礎詞彙，簡單句型 |
| A2 | 初級 | 日常話題，基本語法 |
| B1 | 中級 | 工作學習話題，複雜語法 |
| B2 | 中上級 | 抽象概念，流暢表達 |
| C1 | 高級 | 專業內容，精確表達 |
| C2 | 精通 | 母語水準，複雜思辨 |

## ⏱️ 精確時間控制

**新版本具備精確的長度控制系統！**

| 設定時間 | 預計字數 | 實際效果 |
|---------|----------|----------|
| 0.5分鐘 | ~50字 | 簡短要點 |
| 1分鐘 | ~80字 | 快速概覽 |
| 2分鐘 | ~150字 | 重點討論 |
| 3分鐘 | ~250字 | 深入說明 |
| 5分鐘 | ~400字 | 完整分析 |

**控制機制**：
- ✅ **三重參數控制**：word_count + max_chunks + min_chunk_size
- ✅ **強化 AI 指令**：明確的字數限制要求
- ✅ **後處理截斷**：自動修剪過長內容
- ✅ **智能邊界**：在對話完整點截斷

## 📁 輸出結構

```
podcast_output/
└── podcast_B2_20250820_035547/
    ├── script.txt        # 對話腳本
    ├── podcast.wav      # 音頻檔案
    └── metadata.json    # 元數據
```

## 🔧 快速範例

```bash
# 激活環境
source venv_312/bin/activate

# 生成 A2 等級，3分鐘播客
python quick_podcast.py A2 ./sample_article.txt 3

# 生成 C1 等級，5分鐘播客，自訂輸出目錄
python quick_podcast.py C1 ./article.txt 5 ./my_podcasts
```

## 🎵 工作流程

1. **Podcastfy** 使用 Gemini 2.5 Flash 分析文章生成對話腳本
2. **Gemini Multi-Speaker TTS** 生成高品質多說話者音頻
3. 自動保存到結構化目錄，包含元數據

## 📊 性能追蹤與分析

**新增運行時間統計功能！**

### 自動性能追蹤
每次播客生成都會自動記錄：
- ⏱️ **各階段耗時**：輸入檢測、腳本生成、音頻生成
- 📈 **成功率統計**：追蹤生成成功與失敗情況
- 🔧 **配置影響**：分析不同設定對性能的影響
- 💾 **詳細日誌**：保存到 `performance_logs/` 目錄

### 性能分析工具
```bash
# 查看性能摘要
python performance_analyzer.py --summary

# 生成完整性能報告
python performance_analyzer.py --full-report

# 分析特定會話
python performance_analyzer.py --session session_20250820_043906

# 查看最近會話
python performance_analyzer.py
```

### 性能指標說明
- **腳本生成階段**：通常 20-60 秒（受文章長度影響）
- **音頻生成階段**：通常 5-15 秒（受目標時長影響）
- **總處理時間**：平均 1-3 分鐘
- **成功率目標**：>95%

## ⚡ 系統需求

- Python 3.11+
- Gemini API Key (設定在 .env)
- 約 1-3 分鐘處理時間 (視篇幅而定)